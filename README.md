# 4Roads Backend

Backend API –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞ 4roads.su

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```bash
uvicorn app.main:app --reload
```

### –î–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
```
URL: http://localhost:8000/admin
–õ–æ–≥–∏–Ω: admin
–ü–∞—Ä–æ–ª—å: admin123
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ò–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è production! –°–º. [ADMIN_AUTH.md](ADMIN_AUTH.md)

## üì¶ –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

> üí° **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: –°–º. [QUICK_START.md](QUICK_START.md)

### –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± (shell-—Å–∫—Ä–∏–ø—Ç)
```bash
# –û–±—ã—á–Ω—ã–π –∏–º–ø–æ—Ä—Ç
./import_products.sh

# –° –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
./import_products.sh --refresh

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
./import_products.sh --dry-run --max-pages 1

# –û—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–µ–π
./import_products.sh --cleanup

# –°–ø—Ä–∞–≤–∫–∞
./import_products.sh --help
```

### –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ Python
```bash
# –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
python3 -m app.utils.import_4roads_full --collection-url https://4roads.su/collection/vse-kollektsii

# –° –æ–ø—Ü–∏—è–º–∏
python3 -m app.utils.import_4roads_full \
  --collection-url https://4roads.su/collection/vse-kollektsii \
  --max-pages 5 \
  --refresh-images
```

### –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –¥—É–±–ª–∏
python3 -m app.utils.cleanup_orphaned_images

# –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏
python3 -m app.utils.cleanup_orphaned_images --execute
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üöÄ [QUICK_START.md](QUICK_START.md) - **–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –∏–º–ø–æ—Ä—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤**
- üîê [ADMIN_AUTH.md](ADMIN_AUTH.md) - **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏**
- üõ†Ô∏è [IMPORT_IMAGES_FIX.md](IMPORT_IMAGES_FIX.md) - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- üë®‚Äçüíº [ADMIN_PANEL.md](ADMIN_PANEL.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- üìù [CONTINUITY.md](CONTINUITY.md) - –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
app/
‚îú‚îÄ‚îÄ api/v1/             # API endpoints
‚îú‚îÄ‚îÄ core/               # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ dto/           # Data Transfer Objects
‚îÇ   ‚îú‚îÄ‚îÄ repositories/  # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ services/      # –°–µ—Ä–≤–∏—Å—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îú‚îÄ‚îÄ infrastructure/     # –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π —Å–ª–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ config/        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database/      # –ú–æ–¥–µ–ª–∏ –ë–î –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ errors/        # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –æ—à–∏–±–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ middleware/    # Middleware
‚îî‚îÄ‚îÄ utils/             # –£—Ç–∏–ª–∏—Ç—ã
```

## üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã

### import_4roads_full.py
–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å —Å–∞–π—Ç–∞ 4roads.su:
- –ü–∞—Ä—Å–∏–Ω–≥ HTML —Å—Ç—Ä–∞–Ω–∏—Ü
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –≤ –ë–î

### cleanup_orphaned_images.py
–û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:
- –ü–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –≤ –ë–î
- –ü–æ–¥—Å—á–µ—Ç –∑–∞–Ω–∏–º–∞–µ–º–æ–≥–æ –º–µ—Å—Ç–∞
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å dry-run —Ä–µ–∂–∏–º–æ–º

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ú–∏–≥—Ä–∞—Ü–∏–∏
```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "–æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
alembic downgrade -1
```

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- **SOLID** - —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **KISS** - Keep It Simple, Stupid
- **Clean Code** - —á–∏—Å—Ç—ã–π, —á–∏—Ç–∞–µ–º—ã–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –∫–æ–¥
- **Design Patterns** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∏–º–ø–æ—Ä—Ç–µ —Å —Ñ–ª–∞–≥–æ–º `--refresh-images` —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã, –∞ —Å—Ç–∞—Ä—ã–µ –æ—Å—Ç–∞–≤–∞–ª–∏—Å—å –Ω–∞ –¥–∏—Å–∫–µ.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —è–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ [IMPORT_IMAGES_FIX.md](IMPORT_IMAGES_FIX.md)

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–ø—Ä–∏–µ—Ç–∞—Ä–Ω–æ–µ –ü–û. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

