# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ò–º–ø–æ—Ä—Ç –ø—Ä–æ–¥—É–∫—Ç–æ–≤

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

–ë–∞–≥ —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω**:
- ‚úÖ –°—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã —Ç–µ–ø–µ—Ä—å —É–¥–∞–ª—è—é—Ç—Å—è –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å—á–µ—Ç—á–∏–∫ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ –æ—á–∏—Å—Ç–∫–∏ –¥—É–±–ª–µ–π
- ‚úÖ –ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç SOLID –∏ KISS

---

## üì¶ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

### 1Ô∏è‚É£ –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± (—á–µ—Ä–µ–∑ shell-—Å–∫—Ä–∏–ø—Ç)

```bash
# –û–±—ã—á–Ω—ã–π –∏–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
./import_products.sh

# –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –ò –∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
./import_products.sh --refresh

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î)
./import_products.sh --dry-run --max-pages 1

# –¢–æ–ª—å–∫–æ –æ—á–∏—Å—Ç–∫–∞ –¥—É–±–ª–µ–π
./import_products.sh --cleanup

# –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º –æ–ø—Ü–∏—è–º
./import_products.sh --help
```

### 2Ô∏è‚É£ –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫ Python-—Å–∫—Ä–∏–ø—Ç–∞

```bash
# –ò–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
python3 -m app.utils.import_4roads_full \
  --collection-url https://4roads.su/collection/vse-kollektsii

# –° –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü (–±—ã—Å—Ç—Ä–µ–µ)
python3 -m app.utils.import_4roads_full \
  --collection-url https://4roads.su/collection/vse-kollektsii \
  --max-pages 2

# –û–±–Ω–æ–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
python3 -m app.utils.import_4roads_full \
  --collection-url https://4roads.su/collection/vse-kollektsii \
  --refresh-images

# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python3 -m app.utils.import_4roads_full \
  --collection-url https://4roads.su/collection/vse-kollektsii \
  --dry-run \
  --max-pages 1

# –í—Å–µ –æ–ø—Ü–∏–∏ —Å—Ä–∞–∑—É
python3 -m app.utils.import_4roads_full \
  --collection-url https://4roads.su/collection/aksessuary \
  --max-pages 5 \
  --delay 0.3 \
  --refresh-images
```

### 3Ô∏è‚É£ –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –¥—É–±–ª–µ–π (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è)
python3 -m app.utils.cleanup_orphaned_images

# –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏
python3 -m app.utils.cleanup_orphaned_images --execute
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ —É–∂–µ –±—ã–ª–∏ –∏–º–ø–æ—Ä—Ç—ã)

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –¥—É–±–ª–µ–π
python3 -m app.utils.cleanup_orphaned_images

# 2. –ï—Å–ª–∏ –¥—É–±–ª–∏ –µ—Å—Ç—å - —É–¥–∞–ª–∏—Ç—å –∏—Ö
python3 -m app.utils.cleanup_orphaned_images --execute

# 3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç—ã
./import_products.sh
```

### –û–±—ã—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–º–ø–æ—Ä—Ç (–æ–±–Ω–æ–≤–∏—Ç —Ü–µ–Ω—ã/–æ–ø–∏—Å–∞–Ω–∏—è, –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
./import_products.sh
```

### –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

```bash
# –û–±–Ω–æ–≤–∏—Ç—å –≤—Å—ë –≤–∫–ª—é—á–∞—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
./import_products.sh --refresh
```

---

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

–í—ã –º–æ–∂–µ—Ç–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ª—é–±—É—é –∫–æ–ª–ª–µ–∫—Ü–∏—é —Å —Å–∞–π—Ç–∞:

```bash
# –í—Å–µ —Ç–æ–≤–∞—Ä—ã
--collection-url https://4roads.su/collection/vse-kollektsii

# –ß–µ–º–æ–¥–∞–Ω—ã
--collection-url https://4roads.su/collection/chemodany

# –†—é–∫–∑–∞–∫–∏
--collection-url https://4roads.su/collection/ryukzaki

# –°—É–º–∫–∏
--collection-url https://4roads.su/collection/sumki

# –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã
--collection-url https://4roads.su/collection/aksessuary
```

---

## üîß –û–ø—Ü–∏–∏ –∏–º–ø–æ—Ä—Ç–∞

| –û–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|-------|----------|--------|
| `--collection-url` | URL –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ | `--collection-url https://4roads.su/collection/sumki` |
| `--max-pages` | –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª-–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü | `--max-pages 5` |
| `--delay` | –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (—Å–µ–∫) | `--delay 0.3` |
| `--refresh-images` | –û–±–Ω–æ–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | `--refresh-images` |
| `--skip-existing` | –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ | `--skip-existing` |
| `--dry-run` | –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –ë–î | `--dry-run` |
| `--export-json` | –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON | `--export-json --json-path data.json` |
| `--import-json` | –ò–º–ø–æ—Ä—Ç –∏–∑ JSON | `--import-json --json-path data.json` |

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### 1. –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ü–µ—Ä–≤—ã–π —Ä–∞–∑ - –ø–∞—Ä—Å–∏–º –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ JSON
python3 -m app.utils.import_4roads_full \
  --collection-url https://4roads.su/collection/sumki \
  --export-json \
  --json-path data/sumki.json \
  --dry-run

# –ü–æ—Ç–æ–º –±—ã—Å—Ç—Ä–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏–∑ JSON –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ
python3 -m app.utils.import_4roads_full \
  --import-json \
  --json-path data/sumki.json
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏–º–ø–æ—Ä—Ç–∞

```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ë–î
psql -d 4roads -c "SELECT COUNT(*) FROM products;"

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ –ë–î
psql -d 4roads -c "SELECT COUNT(*) FROM product_images;"

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ –Ω–∞ –¥–∏—Å–∫–µ
find static/images/products -name "*.webp" | wc -l
```

### 3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–æ –≤—Ä–µ–º—è –∏–º–ø–æ—Ä—Ç–∞

```bash
# –í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
./import_products.sh | tee import.log

# –°–º–æ—Ç—Ä–∏–º –ø—Ä–æ–≥—Ä–µ—Å—Å —Ñ–∞–π–ª–æ–≤
watch -n 5 'find static/images/products -name "*.webp" | wc -l'
```

---

## ‚ùì FAQ

**Q: –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∏–º–ø–æ—Ä—Ç?**  
A: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤. –û–±—ã—á–Ω–æ ~3-5 –º–∏–Ω—É—Ç –Ω–∞ 100 —Ç–æ–≤–∞—Ä–æ–≤ —Å `--delay 0.5`.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–ª–ª–µ–∫—Ü–∏–π —Å—Ä–∞–∑—É?**  
A: –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ —Å —Ä–∞–∑–Ω—ã–º–∏ URL –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `vse-kollektsii`.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –∏–º–ø–æ—Ä—Ç –ø—Ä–µ—Ä–≤–∞–ª—Å—è?**  
A: –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ - —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–æ–≤–∞—Ä—ã –æ–±–Ω–æ–≤—è—Ç—Å—è, –Ω–æ–≤—ã–µ –¥–æ–±–∞–≤—è—Ç—Å—è.

**Q: –ö–∞–∫ —á–∞—Å—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å `--refresh-images`?**  
A: –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —Å–∞–π—Ç–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å. –û–±—ã—á–Ω–æ —ç—Ç–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

**Q: –î—É–±–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ —Å–æ–∑–¥–∞—é—Ç—Å—è!**  
A: –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –∫–æ–¥–∞. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `cleanup_orphaned_images`.

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º–∞: "command not found: python"

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ python3
python3 -m app.utils.import_4roads_full ...
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Module not found"

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Permission denied"

```bash
# –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º
chmod +x import_products.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
mkdir -p static/images/products
chmod 755 static/images/products
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [IMPORT_IMAGES_FIX.md](IMPORT_IMAGES_FIX.md) - –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –±–∞–≥–∞
- [ADMIN_PANEL.md](ADMIN_PANEL.md) - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- [README.md](README.md) - –û–±—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

---

**–ì–æ—Ç–æ–≤–æ! –ú–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–º–ø–æ—Ä—Ç! üöÄ**

