- Goal (критерии успеха):
  - Внедрить корзину без авторизации, страницу заказов в админке, оформление заказа как заявки с контактными данными и email-уведомлением с HTML-шаблоном.
- Constraints/Assumptions:
  - В начале каждого хода читать и обновлять `CONTINUITY.md`.
  - Нет сетевого доступа из shell без аппрува.
- Key decisions:
  - Уведомления отправляются в фоне; SMTP-данные берутся из ENV, email получателя — из таблицы settings.
- State:
  - Done:
    - Прочитан `CONTINUITY.md`.
    - Добавлены модели Order/OrderItem, DTO, сервис, репозиторий и API `/api/v1/order`.
    - Добавлены админ-страницы заказов и позиций заказов.
    - Добавлено HTML-письмо и отправка email по заказу.
    - Добавлена миграция для таблиц orders/order_items.
    - Добавлен API корзины на cookie-based session (`/api/v1/cart`) и checkout из корзины.
    - Удалено поле адреса из заказа (модель/DTO/админка/email) и добавлена миграция.
    - Добавлена спека интеграции API корзины/checkout в `docs/`.
  - Now:
    - Уточнить требования к cookie параметрам сессии для фронтенда.
  - Next:
    - При необходимости настроить параметры SessionMiddleware (cookie name/age/samesite/secure).
- Open questions (UNCONFIRMED если нужно):
  - Оставляем корзину в cookies через SessionMiddleware или нужен отдельный backend storage?
  - Какие поля нужны в заказе (email/комментарий/доставка/оплата)?
  - Email получателя: `settings.email` или отдельный адрес?
- Working set (files/ids/commands):
  - `CONTINUITY.md`
  - `app/infrastructure/database/models/order.py`
  - `app/core/dto/order.py`
  - `app/core/services/order_service.py`
  - `app/core/repositories/order_repository.py`
  - `app/api/v1/routers/order.py`
  - `app/api/v1/routers/cart.py`
  - `app/core/dto/cart.py`
  - `app/infrastructure/email/sender.py`
  - `app/infrastructure/email/templates/order_notification.html`
  - `admin/admin.py`
  - `migrations/versions/5f3a2e9f1a2b_add_orders.py`
  - `migrations/versions/7a2b9d1c3f4e_drop_order_address.py`
  - `docs/cart_checkout_api.md`
